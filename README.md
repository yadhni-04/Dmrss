# Decentralized Medical Record System (DMRS)

A secure, decentralized system for uploading, storing, and sharing encrypted medical records using Ethereum and IPFS. Patients can upload medical records, which are automatically encrypted and stored on IPFS, and control access through blockchain-based consent.

## Table of Contents
- [Overview](#overview)
- [Features](#features)
- [Tech Stack](#tech-stack)
- [Prerequisites](#prerequisites)
- [Project Setup](#project-setup)
- [Running the Project](#running-the-project)
- [Implemented Functionality](#implemented-functionality)
- [API Endpoints](#api-endpoints)
- [Frontend Usage](#frontend-usage)
- [Future Improvements](#future-improvements)

## Overview
This project enables patients to securely upload their medical records. Files are encrypted automatically, uploaded to IPFS, and relevant metadata (record ID, patient address, CID, hash) is stored on the Ethereum blockchain. Only authorized users with granted consent can access the records.

## Features
- Upload medical records securely
- Automatic AES encryption for all files
- IPFS storage with immutable CIDs
- Metadata stored on Ethereum blockchain
- Grant/revoke access to clinicians
- Download encrypted records
- Integrity verification via SHA-256 hash

## Tech Stack
- **Frontend:** React.js  
- **Backend:** Node.js + Express.js  
- **Blockchain:** Ethereum (Ganache / local testnet / testnet/mainnet)  
- **IPFS:** IPFS HTTP Client  
- **Encryption:** AES symmetric encryption  
- **Ethereum Library:** ethers.js  

## Prerequisites
Before running the project, make sure you have:

### Node.js & npm
Download and install: [https://nodejs.org](https://nodejs.org)  
Check versions:
```bash
node -v
npm -v
```

### Docker
Download and install: [https://www.docker.com/get-started](https://www.docker.com/get-started)

To run IPFS locally in a container:

```bash
docker run -d --name ipfs_host -v ipfs_staging:/export -v ipfs_data:/data/ipfs -p 5001:5001 -p 8080:8080 ipfs/go-ipfs:latest
```
## Project Setup
### Clone the repository
```bash
git clone https://github.com/yourusername/dmrs-mvp.git
cd dmrs-mvp
```
### Install backend dependencies
```bash
cd backend
npm install
```
### Install frontend dependencies
```bash
cd ../frontend
npm install
```
### Configure environment 
Create a .env file in the backend folder:
```bash
RPC_URL=http://127.0.0.1:8545      
PRIVATE_KEY=<your_wallet_private_key>   # From Hardhat-generated account or your wallet
CONTRACT_ADDRESS=<deployed_contract_address>  # After deploying MedicalRecords.sol
IPFS_API=http://127.0.0.1:5001  
PORT=4000
```
In the frontend, enter one of the Ethereum accounts generated by Hardhat (0x…) when uploading or granting consent at patient address.
### Running the Project
## Start backend
```bash
cd backend
npm start
```
Backend runs at: http://localhost:4000
## Start frontend
```bash
cd frontend
npm start
```
Frontend runs at: http://localhost:3000
### Implemented Functionality
## File Upload
-Users can upload a file and provide a record ID and patient Ethereum address.
-Backend automatically encrypts the file and uploads it to IPFS.
-Metadata stored on Ethereum blockchain:
-recordId (converted to bytes32)
--patientAddress
--IPFS CID
--SHA-256 hash
## Grant Consent
-Patients can grant access to a clinician for a specific record.
-Consent recorded on Ethereum.
## Download Encrypted Records
-Authorized users can download the encrypted file from IPFS.
## Error Handling
-Validates Ethereum addresses
-Ensures record ID length constraints (bytes32)
-Handles missing files
## Frontend
-React-based upload page
-Displays CID and encryption key (for demo purposes)

### Frontend Usage
1.Go to the Upload Page
2.Enter:
-Patient Ethereum address (from terminal generated out of 20.. eg. 0x…)
-Record ID (max 32 chars recommended)
-File to upload
3.Click Upload
On success, the system returns:
-CID (IPFS reference)
-File hash (SHA-256)
-Encryption key (hex) – for demo






